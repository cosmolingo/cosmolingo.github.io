<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1">
    <link rel="icon" href="" type="image/x-icon">
    <title>login</title>
    <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
    <script src="https://code.jquery.com/ui/1.14.1/jquery-ui.js"></script>
    <link rel="stylesheet" href="../style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Balsamiq+Sans:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Cherry+Bomb+One&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Sniglet:wght@800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Single+Day&display=swap" rel="stylesheet">
    <script src="https://kit.fontawesome.com/1c5060d9dc.js" crossorigin="anonymous"></script>
    <script src="src/js/navigation.js"></script>
    <style>
        #title .fa-user{
            font-size: 40px;
        }
        #title .fa-user:first-child{
            margin-right: 15px;
        }
        #title .fa-user:last-child{
            margin-left: 15px;
        }
    </style>
    </head>
<body>
<div id="wave_top">
    <svg viewBox="0 0 1000 150" preserveAspectRatio="none" style="height: 100%; width: 100%;">
        <path d="M1000,101.71c0,0-106.81-108.65-238.66,0s-261.34,0-261.34,0s-106.81-108.65-238.66,0S0,101.71,0,101.71V0h1000 V101.71z" style="stroke: none;fill: #f2e269;"></path>
    </svg>
</div>
<div id="title">
    <h1><i class="fa-solid fa-user"></i>login<i class="fa-solid fa-user"></i></h1>
</div>
<div id="navigation"></div>

<div id="login">
    <input type="text" id="login_username" name="username" placeholder="username">
    <input type="password" id="login_password" name="password" placeholder="password">
    <br/>
    <button type="submit" class="button" id="login_button">login</button>
</div>
<div id="wave_bottom">
    <svg viewBox="0 0 1000 150" preserveAspectRatio="none" style="height: 100%; width: 100%;">
        <path d="M1000,48.29c0,0-106.81,108.65-238.66,0s-261.34,0-261.34,0s-106.81,108.65-238.66,0S0,48.29,0,48.29V150h1000 V48.29z" style="stroke: none;fill: #f2e269;"></path>
    </svg>
</div>
<script>
    $(document).ready(function(){
        $("#login_button").click(function(){
            var username = $("#login_username").val();
            var password = $("#login_password").val();
            if(username == "" || password == ""){
                alert("Please fill in all fields");
            }
            var url = "/php/login.php";
            $.ajax({
                type: "POST",
                url: url,
                data: {username: username, password: password},
                success: function(data){
                    data = data.split("<br/>");
                    if (data[0] == "success"){
                        document.cookie = 'sessionID=' + data[1] + ';expires=' + new Date(new Date().getTime() + 1000*60*60*24*7).toUTCString() + ';path=/';
                        document.cookie = 'username=' + username + ';expires=' + new Date(new Date().getTime() + 1000*60*60*24*7).toUTCString() + ';path=/';
                        window.location.href = window.location.origin;
                    }
                    else{
                        alert(data[1]);
                    }
                }
            });
        });
    });
</script>
</body>
</html>